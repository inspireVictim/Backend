# üè¶ –î–∞–Ω–Ω—ã–µ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π Optima Bank

## üìã –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å #15 (Account ID: 15)
```
ID: 15
–¢–µ–ª–µ—Ñ–æ–Ω: +996555111111
Email: bank.test.user15@yess-test.com
–ü–∞—Ä–æ–ª—å: SecurePassword123!
–°—Ç–∞—Ç—É—Å: –ê–∫—Ç–∏–≤–µ–Ω, –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
–ë–∞–ª–∞–Ω—Å: 0.00 KGS (–º–æ–∂–Ω–æ –ø–æ–ø–æ–ª–Ω—è—Ç—å)
```

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å #16 (Account ID: 16)
```
ID: 16
–¢–µ–ª–µ—Ñ–æ–Ω: +996555222222
Email: bank.test.user16@yess-test.com
–ü–∞—Ä–æ–ª—å: SecurePassword123!
–°—Ç–∞—Ç—É—Å: –ê–∫—Ç–∏–≤–µ–Ω, –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
–ë–∞–ª–∞–Ω—Å: 0.00 KGS (–º–æ–∂–Ω–æ –ø–æ–ø–æ–ª–Ω—è—Ç—å)
```

### –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è –æ—à–∏–±–æ–∫
```
ID: 99999 - –ù–ï –°–û–ó–î–ê–ù –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–∫–∏ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω"
–û–∂–∏–¥–∞–µ–º—ã–π –∫–æ–¥ –æ—à–∏–±–∫–∏: result=3
```

## üîó API Endpoint

**URL:** `https://5.59.232.211:8443`

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `/api/v1/optima/payment`

**–ú–µ—Ç–æ–¥:** `GET`

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:** XML (UTF-8)

## üì§ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—á–µ—Ç–∞ (CHECK) - Account ID: 15
```
GET https://5.59.232.211:8443/api/v1/optima/payment?command=check&txn_id=12345678901234567890&account=15&sum=100.00
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <osmp_txn_id>12345678901234567890</osmp_txn_id>
    <sum>100.00</sum>
    <result>0</result>
    <comment>OK</comment>
</response>
```

### 2. –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ (PAY) - Account ID: 15
```
GET https://5.59.232.211:8443/api/v1/optima/payment?command=pay&txn_id=12345678901234567891&txn_date=20231205143000&account=15&sum=100.00
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <osmp_txn_id>12345678901234567891</osmp_txn_id>
    <sum>100.00</sum>
    <result>0</result>
    <comment>OK</comment>
</response>
```

### 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω - Account ID: 99999
```
GET https://5.59.232.211:8443/api/v1/optima/payment?command=check&txn_id=12345678901234567892&account=99999&sum=100.00
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <osmp_txn_id>12345678901234567892</osmp_txn_id>
    <sum>100.00</sum>
    <result>3</result>
    <comment>–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∞–±–æ–Ω–µ–Ω—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω</comment>
</response>
```

### 4. –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ - Account ID: 16
```
GET https://5.59.232.211:8443/api/v1/optima/payment?command=pay&txn_id=12345678901234567894&txn_date=20231205143000&account=16&sum=1.00
```

### 5. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ - Account ID: 16
```
GET https://5.59.232.211:8443/api/v1/optima/payment?command=pay&txn_id=12345678901234567895&txn_date=20231205143000&account=16&sum=100000.00
```

## üìä –ö–æ–¥—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–æ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è |
|-----|----------|-------------------|
| `0` | OK | –û–ø–µ—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞ |
| `1` | –°—á–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω | –°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω |
| `2` | –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –∞–±–æ–Ω–µ–Ω—Ç–∞ | `account` –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç—É (1-10 —Ü–∏—Ñ—Ä) |
| `3` | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∞–±–æ–Ω–µ–Ω—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º ID –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç |
| `4` | –ê–±–æ–Ω–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø–ª–∞—Ç–µ–∂–∏ | –ê–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –∏–ª–∏ –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω |
| `8` | –í—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã |

## üîê –§–æ—Ä–º–∞—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### command (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
- –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: `check`, `pay`
- –†–µ–≥–∏—Å—Ç—Ä –Ω–µ –≤–∞–∂–µ–Ω

### txn_id (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
- –§–æ—Ä–º–∞—Ç: —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã, –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤
- –ü—Ä–∏–º–µ—Ä: `12345678901234567890`
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –±–∞–Ω–∫–∞

### account (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
- –§–æ—Ä–º–∞—Ç: —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã, –æ—Ç 1 –¥–æ 10 —Å–∏–º–≤–æ–ª–æ–≤
- –ü—Ä–∏–º–µ—Ä: `15`, `16`, `1234567890`
- –≠—Ç–æ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ Yess Loyalty
- **–í–∞–∂–Ω–æ:** Account ID –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å Id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (users.Id)

### sum (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
- –§–æ—Ä–º–∞—Ç: –¥–µ—Å—è—Ç–∏—á–Ω–æ–µ —á–∏—Å–ª–æ —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ —Å–æ—Ç—ã—Ö
- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å: —Ç–æ—á–∫–∞ (`.`)
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–≤–∞ –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ —Ç–æ—á–∫–∏
- –ü—Ä–∏–º–µ—Ä—ã: `1.00`, `100.50`, `1000.00`
- –î–∏–∞–ø–∞–∑–æ–Ω: –æ—Ç `1.00` –¥–æ `100000.00` KGS

### txn_date (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —Ç–æ–ª—å–∫–æ –¥–ª—è `pay`)
- –§–æ—Ä–º–∞—Ç: `yyyyMMddHHmmss` (14 —Ü–∏—Ñ—Ä)
- –ü—Ä–∏–º–µ—Ä: `20231205143000` = 5 –¥–µ–∫–∞–±—Ä—è 2023, 14:30:00
- –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è UTC

## üìè –õ–∏–º–∏—Ç—ã

- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞:** 1.00 KGS
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞:** 100000.00 KGS
- **–§–æ—Ä–º–∞—Ç —Å—É–º–º—ã:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–≤–∞ –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ —Ç–æ—á–∫–∏ (10.45, –Ω–µ 10.5)
- **–î–ª–∏–Ω–∞ txn_id:** –î–æ 20 —Ü–∏—Ñ—Ä
- **–î–ª–∏–Ω–∞ account:** –û—Ç 1 –¥–æ 10 —Ü–∏—Ñ—Ä
- **–¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞:** 60 —Å–µ–∫—É–Ω–¥

## üîí IP Whitelist

**–í–∞–∂–Ω–æ:** –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –≤–∫–ª—é—á–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ IP-–∞–¥—Ä–µ—Å–æ–≤.

**–¢–µ–∫—É—â–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ IP-–¥–∏–∞–ø–∞–∑–æ–Ω—ã:**
- `79.142.16.0/20`
- `31.148.30.4/32`

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å IP-–∞–¥—Ä–µ—Å–∞ –±–∞–Ω–∫–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫.

## üß™ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
   ```
   GET https://5.59.232.211:8443/api/v1/health
   ```

2. **–¢–µ—Å—Ç CHECK –∫–æ–º–∞–Ω–¥—ã:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Account ID: 15 –∏–ª–∏ 16
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (result=0)

3. **–¢–µ—Å—Ç PAY –∫–æ–º–∞–Ω–¥—ã:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—Ç –∂–µ Account ID
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (result=0)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–∞–ª–∞–Ω—Å —É–≤–µ–ª–∏—á–∏–ª—Å—è

4. **–¢–µ—Å—Ç –æ—à–∏–±–æ–∫:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Account ID: 99999 (–Ω–µ –Ω–∞–π–¥–µ–Ω)
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å—É–º–º—ã
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É–º–º—É –º–µ–Ω—å—à–µ –º–∏–Ω–∏–º—É–º–∞ (0.50)
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É–º–º—É –±–æ–ª—å—à–µ –º–∞–∫—Å–∏–º—É–º–∞ (200000.00)

5. **–¢–µ—Å—Ç –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏:**
   - –í—ã–ø–æ–ª–Ω–∏—Ç–µ PAY —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º txn_id –¥–≤–∞–∂–¥—ã
   - –û–±–∞ –∑–∞–ø—Ä–æ—Å–∞ –¥–æ–ª–∂–Ω—ã –≤–µ—Ä–Ω—É—Ç—å result=0
   - –°—Ä–µ–¥—Å—Ç–≤–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑

## üõ†Ô∏è –ü—Ä–∏–º–µ—Ä—ã cURL

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—á–µ—Ç–∞
```bash
curl -k "https://5.59.232.211:8443/api/v1/optima/payment?command=check&txn_id=12345678901234567890&account=15&sum=100.00"
```

### –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
```bash
curl -k "https://5.59.232.211:8443/api/v1/optima/payment?command=pay&txn_id=12345678901234567890&txn_date=20231205143000&account=15&sum=100.00"
```

### Health Check
```bash
curl -k "https://5.59.232.211:8443/api/v1/health"
```

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
- **Email:** integration@yess-loyalty.com
- **Reconciliation Email:** reconciliation@yess-loyalty.com

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] Health Check —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] CHECK —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Account ID: 15 –∏–ª–∏ 16) ‚Üí result=0
- [ ] CHECK –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Account ID: 99999) ‚Üí result=3
- [ ] PAY —É—Å–ø–µ—à–Ω–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ (Account ID: 15 –∏–ª–∏ 16) ‚Üí result=0
- [ ] PAY –¥—É–±–ª–∏—Ä—É—é—â–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚Üí result=0 (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)
- [ ] PAY —Å—É–º–º—ã –º–µ–Ω—å—à–µ –º–∏–Ω–∏–º—É–º–∞ ‚Üí –æ—à–∏–±–∫–∞
- [ ] PAY —Å—É–º–º—ã –±–æ–ª—å—à–µ –º–∞–∫—Å–∏–º—É–º–∞ ‚Üí –æ—à–∏–±–∫–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ XML –æ—Ç–≤–µ—Ç–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ UTF-8
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ txn_id
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ txn_date

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 5 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0

